//wrong answer anyway!!!
#include <stdio.h>
#include <cstring>
#include <iostream>
#include <fstream>

using namespace std;

long long dat[256];
int main() {
	ofstream fil;
	fil.open("meme.txt");
	fil.clear();
	int N;
	scanf("%d", &N);
	while (N--) {

		memset(dat, 0, sizeof dat);
		long long dollars = 0;
		long long cents = 0;

		int k;
		scanf("%d", &k);
		while (k--) {
			char ch;
			long long val;
			scanf("\n%c %lli", &ch, &val);
			dat[ch] = val;
		}
		int m;
		scanf("%d\n", &m);
		while (m--) {
			
			char charc;
			//10000 with or without \n
			while (charc = getc(stdin)) {
				if (charc == '\n')
					break;
				cents += dat[charc];

				long long x = cents / 100;
				dollars += x;
				cents -= x * 100;
			}

		}
		if (cents > 9)
			fil << dollars << "." << cents << "$" << endl;
			//printf("%ld.%d$\n", dollars, cents);
		else 
			fil << dollars << ".0" << cents << "$" << endl;
			//printf("%ld.0%d$\n", dollars, cents);
	}
	fil.close();
	return 0;
}

